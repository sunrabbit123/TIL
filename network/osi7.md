# OSI 7계층

[OSI 7계층](https://www.youtube.com/watch?v=1pfTxp25MA8&feature=youtu.be)을 보면서 OSI 7계층에 대해서 알게되었지만 실질적으로는 지금 쓰고 있는 프로토콜 아키텍쳐는 TCP/IP의 형태가 많기때문에 일반적으로는 5, 6, 7 계층이 묶여서 어플리케이션 계층으로 쓰인다.

## 용어 정리
### PDU
Protocol Data Unit
해당 프로토콜의 데이터 유닛이다.

프로토콜로 인해 생긴 데이터 유닛이라고 보면 된다.

### FCS
Frame Check Sequence
오류 검출 데이터로 보면 된다.

### 인캡슐레이션
데이터에 헤더 및 테일을 붙이는 과정

### 디인캡슐레이션
데이터에 헤더 및 테일을 분석하고 해석하는 과정

## 1계층 물리 계층

1계층은 아날로그 신호를 디지털 신호로, 디지털 신호를 아날로그신호로 바꿔주는 변복호 역할을 한다.

일종의 인코딩과 디코딩의 역할이며, 이는 하드웨어적으로 구현되어있다. 즉 통신을 하기 위해서는 물리적으로 연결되어있어야 한다라는 것을 나타낸다.

## 2계층 데이터 링크 계층

2계층은 데이터를 어떻게 구분하는지에 대한 구분자를 붙혀주는 역할을 한다.
물리적 주소인 MAC주소, 네트워크 토폴로지, 네트워크 접속 등의 기준을 나타낸다.
통상적으로 같은 넷 속에서 MAC주소를 보고 경로를 결정하는 역할이라고 볼 수 있다.

3계층에서 받은 `PDU`에 L2헤더 12byte, L2테일 4byte를 붙인다.
이때 L2헤더는 MAC주소 및 타입을 담으며,
L2테일은 FCS, 오류검출용 데이터를 붙인다.

2계층에서 만들어진 데이터 유닛을 통상적으로 프레임이라고 부른다.
이로써 LAN 환경에서 Frame을 전송하는 역할을 한다는것을 알 수 있다.

PDU는 총 1518Byte의 Frame이다.

## 3계층 네트워크 계층
4계층으로부터 받은 `PDU`에 L3헤더를 붙인다.(+ 20byte)
    - 총 1500byte
이 L3헤더에는 네트워크를 통해서 데이터값이 어디로 향해야되는지에 대한 IP주소값 등을 담겨있다.

이를 통해 패킷 스위칭 기능을 제공해주고, 주소체계와 관련된다. 여기서 쓰이는 프로토콜은 IP, ARP, RARP, ICMP 등이 있다.
## 4계층 전송 계층

데이터를 해당 PC에 전송하였으면, 그 이후엔 어떤 프로세스를 향해야 하는지에 대한 Port 주소값을 담고 있다.  

모든 데이터가 `Segment단위(1469byte)`로 나눠진다.
이때 각 데이터의 헤더에 `L4헤더`, 즉 4계층에서 넣어주는 헤더가 들어간다.(20byte)
이렇게 만들어진 데이터를 `PDU(Protocol Data Unit)`라고 한다.

데이터 전송을 위하여 흐름제어, 전송 오류 검출, 재전송과 교정 등의 기능을 한다.

관련 프로토콜 : TCP, UDP
    - TCP
        - CheckSum을 통한 에러제어(흐름제어)의 역할도 한다.
    - UDP
        - 에러를 감수할 경우의 프로토콜이다.(ex : 실시간 스트리밍, 멀티플레이 게임 등)

### TMI
각 종단 장치에서만 4계층 이상으로 올라가며, 그 중간 과정인 스위치, 라우터에서는 1~3계층만 사용한다.

## 5계층 세션 계층

호스트 간의 세션의 연결설정과 관리, 연결 시작, 유지, 종료 기능

표현 계층 간의 통신을 관리하는 동기화와 데이터 교환에 대한 기능 제공

## 6계층 표현 계층

사용자 시스템간의 데이터의 형식에 대한 호환성 제공 데이터의 압축, 암호, 파일형식 등 데이터 타입에 대해 관련된 기능

## 7계층 어플리케이션 계층

유저 인터페이스를 제공하는 계층이며, 직접 이 계층을 프로그래밍 하여 만들 수도 있다.  
SMTP(이메일), FTP(파일전송), Telnet(원격접속), 웹브라우징 등의 서비스같이
네트워크를 사용하는 응용 프로그램 및 프로토콜 등

