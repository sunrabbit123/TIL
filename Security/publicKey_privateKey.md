# 공개키와 비밀키

| 항목 | 대칭키 | 공개키|
|:----:|:----:|:----:|
|키의 상호관계| 암호화키 = 복호화키 | 암호화키!=복호화키|
|안전한 키 길이 | 128bit 이상| 2048bit 이상|
|암호화키|비밀|공개|
|복호화키|비밀|비밀|
|비밀키 전송|필요|불필요|
|키 개수|N(N-1)/2|2N|
|암호화 속도|고속|저속|
|경제성|높다|낮다|
|제공 서비스|기밀성|기밀성, 부인방지, 인증|
|목적|데이터(파일) 암호화|대칭키 교환|
|전자서명|복잡|간단|
|단점|키 교환 원리가 없다.|중간자 공격에 취약하다.|
|해당 알고리즘|DES, 3DES, AES, IDEA|RSA, ECC, DSA|

## 공개키

공개키는 비대칭키라고도 불린다.

비대칭이라 불리는 이유는 간단하다.
암호를 복호화하는 키랑 암호화하는 키가 서로 다르기때문이다.

공개키라 부르는 이유는 수신자가 미리 암호화키를 송신자에게 공개해주기때문이다.
이 암호화키를 송신자가 암호화하여 수신자에게 보내준다.

이러면 복호화가 가능한건, 암호화키를 처음 건네준 수신자만이 복호화를 진행할 수 있다.

### 단점
1. 비밀키 암호에 비해 처리속도가 훨씬 느리다.
2. 중간자 공격에 약하다.

## 비밀키

비밀키는 흔히 대칭키라고 불린다.

대칭이라 불리는 이유는
암호키와 복호화키가 서로 같기 때문이다.

비밀키라 부르는 이유는 이 암호화 키를 공개하면 안되기 때문이다.

### Diffie-Hellman 키 교환

이걸 중간에서 도청이 가능하기에 여러 방법들이 고안되었는데
이 중 제일 널리 쓰이는 것이 `Diffie-Hellman` 키 교환이다.

`이산대수` 문제가 풀기 매우 어렵다는 점을 이용하여
대칭키를 계산하는 식을 만들어 서로 공유하는 방식이다.

### 단점
1. 기밀성을 유지한 통신이 가능하지만, 대칭키를 운영하기 위해서는 키 배송 문제를 해결해야만 한다.

## 하이브리드 암호 시스템
이는 공개키암호의 처리속도가 느린 해결하는 방안이다.
공개키 암호의 중간자 공격에 약한 단점을 해결하기 위해서는 공개키에 대한 `인증`이 필요하다.
`하이브리드 암호 시스템`은 대칭키 암호와 공개키 암호의 장점을 살릴 수 있도록 조합한 방법이다.
일반적으로 서로 다른 2개의 방식을 조합하는 것을 하이브리드라고 한다.

### 체계
1. 먼저 메시지를 고속의 대칭키 암호로 암호화한다. 이러면 메시지의 기밀성을 지킬 수 있다.
2. 그 다음 대칭키 암호의 키 기밀성을 위해 여기에 비대칭키 암호를 사용한다.
즉, 메시지를 암호화할 때 사용한 대칭키 암호키를 공개키 암호로 암호화한다.
[하이브리드 암호 시스템 암호화](./Image/하이브리드-암호-암호화.png)
[하이브리드 암호 시스템 복호화](./Image/하이브리드-암호-복호화.png)

### 하이브리드 암호 시스템의 구체적인 예시
1. 하이브리드 암호시스템에서 공개키 암호의 처리속도가 느린 것을 대칭키 암호로 해결하고, 대칭키 암호의 키 배송 문제를 공개키 암호로 해결하고 있다.
2. 유명한 암호 소프트웨어인 PGP와 web의 암호통신에서 사ㅏ용되고 있는 SSL/TLS에서도 하이브리드 암호 시스템을 사용하고 있다.
3. PGP에서는 하이브리드 암호 시스템에 전자서명, 전자서명의 검증, 개인키의 관리도 추가하여 사용한다.
